<div class="custom-input">
  <label ng-if="vm.label" for="{{vm.bindId}}">{{vm.label}}</label>
  <div class="input-container" ng-click="vm.dialogOpen=true" tabindex="{{vm.tabIndex || -1}}">
    <div ng-if="!vm.$transclude.isSlotFilled('input') && vm.type != 'datepicker'">
      <input
        type="{{vm.type}}"
        name="{{vm.bindName || vm.bindId}}"
        id="{{vm.bindId}}"
        ng-model="vm.model"
        required="required"
        placeholder="{{vm.placeholder}}"
      />
    </div>
    <div ng-if="vm.type == 'datepicker'">
      <datepicker ng-init="vm.getCurrentDate()" date="vm.model">
        <input ng-if="!vm.$transclude.isSlotFilled('input') "
          class='datepicker-input'
          ng-click="$event.stopPropagation();"
          ng-model="vm.model" input-date
        />
        <i class="fa fa-calendar-o fa-fw" ></i>
      </datepicker>
    </div>
    <span ng-transclude="input" ng-if="vm.$transclude.isSlotFilled('input')"></span>
    <span class="icon" ng-if="vm.icon || vm.iconClass" ng-class="vm.iconClass"><span ng-bind="vm.icon"></span></span>

    <div ng-if="vm.type == 'autoComplete'" dialog class="no-arrow left autocomplete" close="vm.modalClosed" is-open="vm.dialogOpens">
      <dialog-content>
        <div ng-if="vm.autoCompleteRow" directive="{{vm.rowsHtmlData}}" compile-template>

        </div>
        <div ng-if="!vm.autoCompleteRow" ng-repeat="item in vm.itemsFiltered track by $index"
          class="row-autocomplete"
          ng-class="{' selected-arrow': vm.indexArrow == $index}"
          ng-click="vm.selectObject(item)">

          <!-- <span ng-if="vm.autoCompleteRow" directive='{{vm.autoCompleteRow}}' compile-template >
          </span> -->
          <span directive='<span>{{item}}</span>' compile-template >

          </span>
        </div>
        <div ng-show="!vm.itemsFiltered.length" class="row-autocomplete empty">אין תוצאות</div>
      </dialog-content>
    </div>
  </div>
  <span ng-if="vm.description" class="description">{{vm.description}}</span>

  <span
    ng-show="vm.formField.$dirty && vm.formField.$invalid"
    class="validation"
    ng-class="{{true ? 'valid' : 'invalid'}}">
    <a tooltip class="tooltip-light tooltip-right ion-ios-close-outline">
      <span ng-repeat="(error, value) in vm.formField.$error" ng-message="error">
        {{vm.formField.$errorMsg[error] || vm.defaultErrorMsg[error] || 'שגיאה'}}<br>
      </span>
    </a>
  </span>
</div>
